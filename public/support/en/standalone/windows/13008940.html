
<div   class="support article"><p class="header1">Медиаретранслятор используется для организации голосовых и видео звонков и конференций. При звонке передача данных между клиентскими приложениями сначала запускается "точка-точка" , а в случае неудачи - через Медиаретранслятор. Если при приёме звонка вы включили флаг "Скрывать мой IP" звонок сразу организуется через Медиаретранслятор. Конференции всегда организуются через Медиаретранслятор.</p><p class="header1">Скопируйте содержимое файла c:\cybrus\server\config\relay.config.sample в c:\cybrus\server\config\relay.config</p><div class="code panel pdl"><div class="codeContent panelContent pdl"><div class="line">copy c:\cybrus\server\config\relay.config.sample c:\cybrus\server\config\relay.config</div></div></div><p>Отредактируйте c:\cybrus\server\config\relay.config</p><table><colgroup><col/><col/></colgroup><tbody><tr><th colspan="2">Обязательные параметры</th></tr><tr><td><pre class="config">external-listen-hostname=</pre></td><td><p>Внешний IP-адрес, то есть тот, который сообщается клиентам для подключения . Обычно это адрес внешнего сетевого интерфейса сервера Windows. В случае, если Вы установили сервер за NAT ом и используете проброс портов (port forwarding), в качестве external-listen-hostname следует указывать внешний адрес NAT а. Адрес можно указывать в виде IP-адреса или DNS имени</p></td></tr><tr><td>login=</td><td>Логин Медиаретранслятора, установленный опцией --relayserver-login при инициализации базы данных. Если вы используете несколько Медиаретрансляторов, они должны использовать общий логин.</td></tr><tr><td colspan="1">passwd=&lt;пароль&gt;</td><td colspan="1">Пароль Медиаретранслятора, установленный при инициализации базы данных</td></tr><tr><td>domain=</td><td>доменное имя, которое вы указывали при инициализации базы данных</td></tr><tr><td>certificate=c:\cybrus\server\config\cybrus_certificate.pem</td><td>Путь к сертификату, полученному в разделе "Генерация ключей и получение сертификата сервера"</td></tr><tr><td>server-host=</td><td>Адрес сервера Сибрус</td></tr><tr><td>server-port=</td><td>Порт сервера Сибрус</td></tr></tbody></table><h4>Запустите Сервер Автоконфигурации как консольное приложение:</h4><p>Сначала выполните команду, чтобы убедиться, что в файле конфигурации нет ошибок:</p><div class="code panel pdl"><div class="codeContent panelContent pdl"><div class="line">c:\cybrus\server\bin\cybrus-relay --config c:\cybrus\server\config\relay.config</div></div></div><p>Если не появилось приглашение командной строки, значит, Медиаретранслятор успешно стартовал. Прервите его работу, нажав CTRL+C.</p><p>Затем запустите его в отдельном окне командой:</p><div class="code panel pdl"><div class="codeContent panelContent pdl"><div class="line">start c:\cybrus\server\bin\cybrus-relay --config c:\cybrus\server\config\relay.config</div></div></div><p>После окончания настройки всех сервисов Сибрус, рекомендуется настроить их запуск как сервисов Windows. См. раздел "Настройка запуска сервера Сибрус как сервиса Windows"</p><h4>Пример:</h4><p class="config">Медиаретранслятор запущен на хосте с внутренним IP-адресом 192.168.10.15</p><p class="config">Из Интернета порты на него проброшены с роутера с IP-адресом внешнего интерфейса 10.10.10.15</p><ul class="square"><li><span>если все клиенты находятся в интрасети, нужно указать в параметре адрес внутреннего интерфейса<br/>external-listen-hostname=192.168.10.15<br/>и все клиенты смогут использовать Медиаретранслятор для звонков, подключаясь к нему по интранетовскому адресу</span></li><li><span>если все клиенты находятся в Интернете, можно указать в параметре адрес внешнего интерфейса роутера или DNS-имя<br/>external-listen-hostname=10.10.10.15<br/>и все клиенты смогут использовать Медиаретранслятор для звонков, подключаясь к нему по интернетовскому адресу</span></li><li><span>если клиенты находятся в интранете и в Интернете, можно указать параметр <br/>external-listen-hostname=10.10.10.15<br/>и все клиенты смогут использовать Медиаретранслятор для звонков, подключаясь к нему по интернетовскому адресу при условии, что роутер позволяет обращаться к своему внешнему интерфейсу из интрасети</span></li><li><span>если клиенты находятся в интранете и в Интернете, рекомендуется  указать параметр в виде DNS имени. <br/>external-listen-hostname=relay.cybrus.example<br/>Если для интрасети DNS имя будет указывать на интранет адрес Медиаретранслятора, а для Интернета на IP-адрес внешнего интерфейса роутера, у клиентов в интрасети не будет проблемы с маршрутизацией.</span></li></ul></div>
