
<div   class="support article"><h4>1.Проинициализируйте базу данных</h4><p>Прочтите и подтвердите лицензионное соглашение. Для создания учетных записей администратора сервера и сервиса Медиаретранслятора введите и подтвердите пароли этих учетных записей.</p><div class="code panel pdl"><div class="codeContent panelContent pdl"><div class="line">c:\cybrus\server\bin\cybrusadm.exe --operation init --login admin --relayserver-login relay_server --domain cybrus.example --dbname cybrus_server</div></div></div><p><span class="image-wrapper"><img class="img-responsive" src="/support/en/standalone/windows/attachments/image2018-6-13_10-36-2.png"/></span></p><div class="alert alert-danger"><div class="rich-text"><p>ВАЖНО!</p><p>При инициализации базы создаётся уникальный идентификатор, к которому привязывается лицензия. Поэтому повторная инициализация допускается только до генерации запроса на лицензию.<br/>Повторная инициализация базы после генерации запроса на лицензию приведет к тому, что ваша лицензия станет недействительной. Восстановить её будет невозможно и вам придется приобретать ее заново.</p></div></div><p><br/></p><table><colgroup><col/><col/></colgroup><tbody><tr><th colspan="2">Обязательные параметры:</th></tr><tr><td>--operation init</td><td>операция инициализации базы (выполняется только один раз!)</td></tr><tr><td>--domain</td><td>ваш домен СИБРУС ( полный логин содержит имя пользователя и домен СИБРУС. имя_пользователя@домен_Сибрус Домен используется для автоматической конфигурации клиента при первом подключении. желательно, чтоб имени домена соответствовала DNS-запись</td></tr><tr><td>--dbname</td><td>имя базы данных монго, где будет храниться вся информация сервера</td></tr><tr><td>--login</td><td>логин пользователя-администратора сервера</td></tr><tr><td>--relayserver-login</td><td>служебный логин, использующийся для подключения сервиса-медиаретранслятора</td></tr></tbody></table><h4>2.Сгенерируйте запрос на лицензию:</h4><p class="alarm">C:\cybrus\server\bin\cybrusadm --operation license_request --domain cybrus.example --dbname cybrus_server --license-request-file c:\cybrus\license_request.req   </p><p><span class="image-wrapper"><img class="img-responsive" src="/support/en/standalone/windows/attachments/image2017-11-16_0-10-3.png"/></span></p><p class="warning"><br/></p><div class="alert alert-danger"><div class="rich-text"><p class="warning">Важно! Лицензия будет привязана к проинициализированной базе.</p></div></div><p class="auto-cursor-target"><br/></p><table><colgroup><col/><col/></colgroup><tbody><tr><th colspan="2">Обязательные параметры</th></tr><tr><td>--operation license_request</td><td>операция получения запроса лицензии</td></tr><tr><td>--domain</td><td>ваш домен Сибрус, указанный при инициализации базы в п.1</td></tr><tr><td>--dbname</td><td><span>имя базы данных, указанное при инициализации базы в п.1</span></td></tr><tr><td>--license-request-file</td><td><span>имя и путь к файлу, куда будет записан запрос на лицензию. Обратите внимание, что имя и путь к файлу не должны содержать символов национальных алфавитов и полностью состоять из латинских букв и/или цифр.</span></td></tr></tbody></table><h4>3.Отправьте файл запроса лицензии </h4><p>по электронной почте по адресу <a href="mailto:contact@cybrus.ru">contact@cybrus.ru</a> . Как только файл запроса лицензии будет получен, мы пришлем вам обратно файл лицензии.</p><p>В дальнейшем при добавлении дополнительных лицензий файл запроса не потребуется. Просто отправьте письмо с указанием количества дополнительных лицензий и после оплаты вы получите файл с дополнительными лицензиями.</p><h4>4.Проверьте полученный обратно файл лицензии</h4><p>Просмотрите его содержимое:</p><div class="code panel pdl"><div class="codeContent panelContent pdl"><div class="line">c:\cybrus\server\bin\cybrusadm --operation verify_license --domain cybrus.example --dbname cybrus_server --license-file &lt;файл лицензии&gt;</div></div></div><p class="auto-cursor-target"><br/></p><table><colgroup><col/><col/></colgroup><tbody><tr><th colspan="2">Обязательные параметры</th></tr><tr><td>--operation verify_license</td><td>операция проверки лицензии</td></tr><tr><td>--domain</td><td><span>ваш домен Сибрус, указанный при инициализации базы в п.1</span></td></tr><tr><td>--dbname</td><td><span>имя базы данных, указанное при инициализации базы в п.1</span></td></tr><tr><td>--license-file</td><td><span>имя и путь к файлу лицензии. Обратите внимание, что имя и путь к файлу не должны содержать символов национальных алфавитов и полностью состоять из латинских букв и/или цифр.</span></td></tr></tbody></table><p><br/></p><h4 class="header2">5.Активируйте лицензию</h4><p>Для этого выполните команду:</p><div class="code panel pdl"><div class="codeContent panelContent pdl"><div class="line">c:\cybrus\server\bin\cybrusadm --operation activate_license --domain cybrus.example --dbname cybrus_server --license-file &lt;файл лицензии&gt;</div></div></div><p><br/></p><table><colgroup><col/><col/></colgroup><tbody><tr><th colspan="2">Обязательные параметры</th></tr><tr><td>--operation activate_license</td><td>операция активации лицензии</td></tr><tr><td>--domain</td><td>ваш домен Сибрус, указанный при инициализации базы в п.1</td></tr><tr><td>--dbname</td><td>имя базы данных, указанное при инициализации базы в п.1</td></tr><tr><td>--license-file</td><td>имя и путь к файлу лицензии. Обратите внимание, что имя и путь к файлу не должны содержать символов национальных алфавитов и полностью состоять из латинских букв и/или цифр.</td></tr></tbody></table><p>После активации лицензии необходимо перезапустить сервер Сибрус или отправить ему команду обновить лицензии</p><div class="code panel pdl"><div class="codeContent panelContent pdl"><div class="line">c:\cybrus\server\bin\cybrusctl -o reload_license -d cybrus.example</div></div></div><p><br/></p><h4 class="header2">ПРИМЕЧАНИЯ</h4><h4 class="header2">Просмотреть текущий статус всех лицензионных пакетов</h4><p class="header2">можно в любой момент командой</p><div class="code panel pdl"><div class="codeContent panelContent pdl"><div class="line">c:\cybrus\server\bin\cybrusadm  --operation print_server_license --domain cybrus.example --dbname cybrus_server</div></div></div><p><br/></p><table><colgroup><col/><col/></colgroup><tbody><tr><th colspan="2">Обязательные параметры</th></tr><tr><td>--operation print_server_license</td><td>операция печати лицензий</td></tr><tr><td>--domain</td><td>ваш домен Сибрус, указанный при инициализации базы в п.1</td></tr><tr><td>--dbname</td><td>имя базы данных, указанное при инициализации базы в п.1</td></tr></tbody></table><p>Если лицензия одна, то будет выведено ее содержимое. Если лицензионных пакетов несколько, то будет выведено содержимое всех лицензионных пакетов, а также совокупная лицензия, сформированная объединением всех актуальных для текущей даты и версии сервера лицензионных пакетов. А так же ближайший срок окончания лицензии</p><h4>Повторная инициализация базы</h4><div class="alert alert-danger"><div class="rich-text"><p>ВАЖНО!</p><p>При инициализации базы создаётся уникальный идентификатор, к которому привязывается лицензия. Поэтому повторная инициализация допускается только до генерации запроса на лицензию!</p><p>При инициализации базы лицензия становится недействительной!</p></div></div><p>Если вы решили проинициализировать базу заново, необходимо запустить программу mongo, указав в качестве параметра имя базы данных, которое вы указали при инициализации.</p><div class="code panel pdl"><div class="codeContent panelContent pdl"><div class="line">c:\cybrus\mongo\bin\mongo.exe &lt;имя_базы&gt;</div></div></div><p>в ответ на приглашение программы mongo, необходимо выполнить команды</p><div class="code panel pdl"><div class="codeContent panelContent pdl"><div class="line">db.dropDatabase();</div><div class="line">exit</div></div></div><p class="auto-cursor-target"><br/></p></div>
