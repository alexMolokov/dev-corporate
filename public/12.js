webpackJsonp([12],{228:function(e,t,s){var a=s(3)(s(231),s(232),!1,function(e){s(229)},"data-v-f55868f4",null);e.exports=a.exports},229:function(e,t,s){var a=s(230);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);s(13)("f745121e",a,!0,{})},230:function(e,t,s){(e.exports=s(12)(!1)).push([e.i,".inputfile[data-v-f55868f4]{width:100%;height:100%;opacity:0;overflow:hidden;position:absolute;z-index:2;border:1px solid #000}.inputfile+label[data-v-f55868f4]{font-size:11px;text-transform:uppercase;font-weight:500;color:#fff;display:inline-block;padding:7px 20px;border-radius:3px;cursor:pointer;background-color:#00a0c8}.inputfile+label>img[data-v-f55868f4]{display:inline-block;margin:0 5px 5px;width:20px;height:20px;color:#fff}",""])},231:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});s(17);var a=s(60),i=s.n(a),r=s(15),o=s(57),n=s(65);t.default={name:"form-add-ticket",components:{"modal-window":i.a,"error-inform":o,"loading-inform":n},data:function(){return{id:"ticket-add",url:"/ticket/add",redirect:!1,wide:!0,theme:"",message:"",priority:"",department:"",files:[],priorities:[],departments:[]}},computed:{labelForFiles:function(){return this.files.length>1?this.files.length+" "+this.$translate.text("files selected"):0==this.files.length?this.$translate.text("Select files"):this.files[0].name}},mixins:[r],locales:{ru:{"Add Ticket":"Добавить тикет","Ticket has been added.":"Тикет был отправлен",Theme:"Тема",Department:"Отдел",Priority:"Приоритет",Message:"Сообщение",Send:"Отправить","Select files":"Выберите файлы","files selected":"файла выбрано"}},created:function(){var e=this;this.uploadInfo("/ticket/queues-priorities",{},function(t){e.priorities=t.priorities,e.departments=t.queues,e.priority=t.defaultPriority,e.department=t.defaultQueue,e.setState(t.queues)})},methods:{validate:function(){var e=new FormData,t={priority:this.priority,department:this.department,theme:this.theme,message:this.message};for(var s in t)e.append(s,t[s]);if(this.files.length>0)for(var a=0;a<this.files.length;a++){var i=this.files[a];e.append("files["+a+"]",i)}this.send(this.url,e,{headers:{"Content-Type":"multipart/form-data"}})},handleFileUploads:function(){void 0!==this.$refs.files&&(this.files=this.$refs.files.files)}}}},232:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("modal-window",{staticClass:"in",staticStyle:{display:"block"},attrs:{id:"change-password",show:!0,wide:e.wide},on:{close:e.close}},[s("div",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{slot:"title"},slot:"title"},[e._v("Add Ticket")]),e._v(" "),s("loading-inform",{attrs:{state:e.state},on:{close:e.close}},[s("div",{staticClass:"window-center",attrs:{slot:"ok-message"},slot:"ok-message"},[s("div",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"complete-body"},[e._v("Ticket has been added.")]),e._v(" "),s("div",{staticClass:"button-close-ok"},[s("button",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"btn btn-green",attrs:{type:"button"},on:{click:e.close}},[e._v("Ok")])])]),e._v(" "),s("div",{attrs:{slot:"buttons"},slot:"buttons"})]),e._v(" "),s("form",{attrs:{url:e.url},on:{submit:function(e){e.preventDefault(),e.stopPropagation()}}},[s("div",[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"form-group top-10"},[s("label",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{for:"theme"}},[e._v("Theme")]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("theme"),expression:"errors.has('theme')"}],staticClass:"help is-danger"},[e._v("*"+e._s(e.errors.first("theme")))]),e._v(" "),s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.theme,expression:"theme"},{name:"validate",rawName:"v-validate",value:{rules:{required:!0,min:5}},expression:"{ rules: { required:true, min:5}}"}],staticClass:"form-control",class:{error:e.errors.has("theme")},attrs:{id:"theme",name:"theme"},domProps:{value:e.theme},on:{input:function(t){t.target.composing||(e.theme=t.target.value)}}})])]),e._v(" "),s("div",{staticClass:"form-group top-10"},[s("label",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{for:"theme"}},[e._v("Department")]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("department"),expression:"errors.has('department')"}],staticClass:"help is-danger"},[e._v("*"+e._s(e.errors.first("department")))]),e._v(" "),s("div",{staticClass:"input-group"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.department,expression:"department"}],attrs:{name:"department"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.department=t.target.multiple?s:s[0]}}},e._l(e.departments,function(t){return s("option",{domProps:{value:t.key}},[e._v("\n                                   "+e._s(t.value)+"\n                               ")])}))])]),e._v(" "),s("div",{staticClass:"form-group top-10"},[s("label",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{for:"theme"}},[e._v("Priority")]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("priority"),expression:"errors.has('priority')"}],staticClass:"help is-danger"},[e._v("*"+e._s(e.errors.first("priority")))]),e._v(" "),s("div",{staticClass:"input-group"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.priority,expression:"priority"}],attrs:{name:"priority"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.priority=t.target.multiple?s:s[0]}}},e._l(e.priorities,function(t){return s("option",{domProps:{value:t.key}},[e._v("\n                                   "+e._s(t.value)+"\n                               ")])}))])]),e._v(" "),s("div",{staticClass:"form-group top-10"},[s("label",{directives:[{name:"translate",rawName:"v-translate"}],attrs:{for:"theme"}},[e._v("Message")]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("message"),expression:"errors.has('message')"}],staticClass:"help is-danger"},[e._v("*"+e._s(e.errors.first("message")))]),e._v(" "),s("div",{staticClass:"input-group"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"},{name:"validate",rawName:"v-validate",value:{rules:{required:!0,min:5}},expression:"{ rules: { required:true, min:5}}"}],attrs:{name:"message",rows:"7"},domProps:{value:e.message},on:{input:function(t){t.target.composing||(e.message=t.target.value)}}},[e._v(e._s(e.message))])])]),e._v(" "),s("div",{staticStyle:{position:"relative"}},[s("input",{ref:"files",staticClass:"inputfile",attrs:{type:"file",multiple:"multiple",id:"files",accept:"image/*, application/pdf,application/msword,application/excel, application/zip"},on:{change:function(t){e.handleFileUploads()}}}),e._v(" "),s("label",{attrs:{for:"files"}},[s("img",{attrs:{src:"/images/icons/icon-download.svg"}}),s("span",[e._v(e._s(e.labelForFiles))])])])])])]),e._v(" "),s("error-inform",{attrs:{err:e.err,state:e.state}}),e._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:e.validate}},[e._v("Send")])])],1)],1)},staticRenderFns:[]}},57:function(e,t,s){var a=s(3)(s(58),s(59),!1,null,null,null);e.exports=a.exports},58:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(14);t.default={name:"error-inform",props:{state:{type:Number,default:a.a.START},err:{type:Object,default:function(){return{validation:[],common:[]}}}},data:function(){return{}},computed:{showError:function(){return(this.err.validation.length>0||this.err.common.length>0)&&this.state==a.a.ERROR}}}},59:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.showError?s("div",{staticClass:"error-block"},[s("div",{staticClass:"alert alert-danger fade in"},[e._l(e.err.validation,function(t){return s("div",{staticClass:"top-10"},[e._v("\n             "+e._s(t.name)+" - "+e._s(t.description)+"\n         ")])}),e._v(" "),e._l(e.err.common,function(t){return s("div",{staticClass:"top-10"},[s("div",{staticClass:"top-10"},[e._v(e._s(t))])])})],2)]):e._e()},staticRenderFns:[]}},60:function(e,t,s){var a=s(3)(s(63),s(64),!1,function(e){s(61)},"data-v-790be6b8",null);e.exports=a.exports},61:function(e,t,s){var a=s(62);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);s(13)("50f81d3c",a,!0,{})},62:function(e,t,s){(e.exports=s(12)(!1)).push([e.i,".modal[data-v-790be6b8]{overflow:auto;overflow-y:scroll}",""])},63:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"modal-window",props:{id:{type:String,required:!0},show:{type:Boolean,required:!1},wide:{type:Boolean,default:!1}},watch:{show:function(){this.show?($("body").addClass("dialog-open"),$("body").addClass("modal-open")):($("body").removeClass("dialog-open"),$("body").removeClass("modal-open"))}},methods:{close:function(e){var t=void 0!==e.srcElement?e.srcElement:e.target;"input"==t&&"radio"==t.type||(e.stopPropagation(),this.$emit("close"))},clickInside:function(e){var t=void 0!==e.srcElement?e.srcElement:e.target;"input"==t&&"radio"==t.type||e.stopPropagation()},bclose:function(){$("#"+this.id).trigger("click")}}}},64:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"modal fade modal-user",attrs:{tabindex:"-1",role:"dialog",id:e.id},on:{click:e.close}},[s("div",{staticClass:"modal-dialog",class:{"modal-dialog-wide":e.wide},attrs:{role:"document"},on:{click:e.clickInside}},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:e.bclose}},[s("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v(" "),s("h4",{staticClass:"modal-title"},[e._t("title",[e._v("Modal Title")])],2)]),e._v(" "),s("div",{staticClass:"modal-body"},[e._t("default")],2)])])])},staticRenderFns:[]}},65:function(e,t,s){var a=s(3)(s(66),s(67),!1,null,null,null);e.exports=a.exports},66:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(14);t.default={name:"loading-inform",props:{state:{type:Number,default:a.a.START}},data:function(){return{STATES:a.a}},locales:{ru:{"Loading...":"Отправляем запрос..."}},methods:{close:function(){this.$emit("close")}}}},67:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.state==e.STATES.LOADING?s("div",{staticClass:"loading-info"},[s("div",{staticClass:"window-center"},[s("div",[s("div",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"processing_text"},[e._v("Loading...")])])])]):e._e(),e._v(" "),e.state==e.STATES.ANSWER?s("div",{staticClass:"ok-message"},[s("div",{staticClass:"window-center"},[s("div",{staticClass:"complete-body"},[s("div",{staticClass:"complete-body_text"},[e._t("ok-message")],2)])]),e._v(" "),e._t("buttons",[s("div",{staticClass:"button-close"},[s("button",{directives:[{name:"translate",rawName:"v-translate"}],staticClass:"btn btn-green",attrs:{type:"button"},on:{click:e.close}},[e._v("Ok")])])])],2):e._e(),e._v(" "),e.state==e.STATES.REDIRECT?s("div",{staticClass:"ok-message"},[s("div",{staticClass:"window-center"},[s("div",{staticClass:"complete-body"},[s("div",{staticClass:"complete-body_text"},[e._t("ok-message-redirect")],2)])])]):e._e(),e._v(" "),e.state==e.STATES.RELOAD?s("div",{staticClass:"ok-message"},[s("div",{staticClass:"window-center"},[s("div",{staticClass:"complete-body"},[s("div",{staticClass:"complete-body_text"},[e._t("ok-message-reload")],2)])]),e._v(" "),e._t("buttons-reload")],2):e._e()])},staticRenderFns:[]}}});