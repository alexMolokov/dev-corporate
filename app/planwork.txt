+ 1) VIPole Enterprise, Standalone edition ()
a) Снять и отменить отметки для ( Cluster Processing Worker, Installing Enterprise Cluster edition, Recovering server data base from backup for Cluster edition)

+ 2)  VIPole Enterprise, Cluster edition ( Recovering server data base from backup for Standalone edition,  Installing Enterprise Standalone edition)

3) Если  уже есть server нельзя сделать заказ с триалом

4)В случае с триалом нужно создать сервер, добавить лицензию на 14 дней, вывести полученные данные, показать во всплывающем окне что делать дальше
в компонент нужно передать выбор пользователя

5) Страница download - 
++Показывать только тогда когда у пользователя есть сервер (в зависимости от edition) javascript
показать только нужные ссылки

contract download c http паролем
curl (выкачивать по ссылкам)+ сохранять в кеше выкачанные файлы на 1 день (на файловой системе)
https://www.vipole.com/download-server/standalone-windows-2017-en
https://www.vipole.com/download-server/cluster-windows-2017-en
https://www.vipole.com/download-server/standalone-linux_x86_64-2017-en
https://www.vipole.com/download-server/cluster-linux_x86_64-2017-en

malex549-vserver
JJht56fD
 
 VIPole Enterprise, Cluster edition
  VIPole Enterprise, Standalone edition

6) 
https://project.vipole.biz:10443/pages/viewpage.action?pageId=14614612 
https://project.vipole.biz:10443/pages/viewpage.action?pageId=14614609 

Верхний уровень такой же как и у download
При клике на ссылку загружается меню и верхний уровень
меню получаем с сервера и документы тоже
сохраняем меню и документы (текст в html)в storage

+ Сгенерить из xml  документы и меню положить в отдельную папку убрать заголовок xml и xmlns

+Убрать аттрибут стиля из генерируемых  html документов
+ меню в порядке отображения сделать

Посмотреть как открывать реальные размеры картинок
посмотреть как отображаются таблицы


+ загружать каталог вместе с первым документом раздела
+ вывести что происходит загрузка

кэштровать документы на сервере
сделать меню для мобильных устройств
+кэшировать документы в клиенте
+кэшировать каталог в клиенте
посмотреть как на яндекс в почте сделана прокрутка (сделать аналогично)

7) Регистрация
+Сделать в конфигурации настройку разрешена ли регистрация
+в конфигурации указать host куда обращаться для подтверждения регистрации

+при регистрации проверять существует ли email (try email) через секунду после остановки
+при регистрации проверять существует ли login (try login) через секунду после остановки

+Завести temp запись с кодом активации
Пароль как нибудь зашифровать (синхронно)
+Сгенерировать событие.
+Подписаться на событие отправив письмо с кодом активации
+Создать письмо

+Активировать и выдать сообщение.
--Автоматически залогинить и пробросить на страницу пользователя.
+Как нибудь показывать что идет загрузка и блокировать повторную отсылку (возможно )


+На логин проверка чтобы мог состоять только из латинских букв и цифр (при регистрации)
+Проверить возвращаемые для пользователя сервера (сейчас возвращается слишком много)

+Добавить в бизнес системе возможность сохранять пароль для сайта....
+При регистрации заполнять данное поле
+Переделать авторизацию для проверки пароля с данным полем

+Удалять запись из редиса после активации аккаунта
+Попробовать запихнуть письмо в очередь (чтобы не работало синхронно)
+Сервера на странице пользователей (перевод)

+Сделать смену языка
+Сделать меню для помощи



11. Магазин

Что передавать
ID - клиента
server_id
license_id
список покупок
метод оплаты




Где то хранить информацию о сделанном заказе (список заказанных товаров)
Выводить в бизнес системе сделанные (оплаченные и нет заказы)
Генерить ссылку об оплате

initTransaction (заполняются данными о транзакции) (VPaymentTransaction)
сохранить данные о транзакции

Пример для тим аккаунта
VBSPaymentCtrlBase::business_account_purchase(stdClass $command)
VBSPaymentProvider::purchaseBusinessAccount(stdClass $command,Vaccount $account,&$error)
[
     VBSPaymentProvider::initTransaction(string $op,array $parameters,Vsubscription $subscription=null)     есть информация об аккаунтID
     [
        VBSPaymentProvider::createRawTransaction(VPaymentTransaction $transaction)                          есть информация об аккаунтID
        VBSPaymentProvider::fillSubscriptionTransaction($transaction,$parameters,$subscription);            не зависит от аккаунта
        VBSPaymentProvider::prefillRawTransaction(VPaymentTransaction $transaction,$parameters)             не зависит от аккаунта
        VBSPaymentProvider::runTransaction(VPaymentTransaction $transaction)                                не зависит от аккаунта
        [
            VBSPaymentProvider::prepareTransaction($transaction);                                           не зависит от аккаунта

        ]
    ]
]



initTransaction
{
    createRawTransaction
    prefillRawTransaction
    return runTransaction (создает в БД) возвращает то что возвратил prepareTransaction {
        prepareTransaction - создает url для перехода в формате ["url" =>  $transaction->raw->payment_url, "parameters" =>  [], "status" => VBSErrorCode::OK] и возвращает
    }
}








При проверке вызывать try login раз в секунду... (посмотреть можно ли это сделать)


+Восстановление пароля - указать email или логин.
+Найти и получить email пользователя
+Сгенерировать код. Сохранить в редис. Сохранять 24 часа.
+Сгенерировать событие (email, code).
+Отослать ссылку для восстановления пароля (2 языка).

+Показать поле для установки нового пароля.
+Проверить правильно ли указан код для изменения пароля.
+Установить новый пароль.



8) Общее ускорение
+Хранить в кеше в течении 5 минут авторизационные данные пользователя
+При логауте генерировать событие и удалять авторизованные данные из кеша
+При изменении личных данных делать тоже самое
+ Хранить в теченние 5 минут авторизационные данные для обращения к бизнес системе

9) Тикеты

10) Завести сервер с тестовой лицензией
Добавить в модульное хранилище информацию о заведенном сервере
Разрешить в случае только если у пользователя не было тестовой лицензии
После загрузки данных для лицензии сгенерировать событие о том что добавлена данная информация (отправить на почту админу)
После того как сгенерирована лицензия информировать пользователя о том что он сможет скачать лицензию


Обновление лицензии
1) Видимая если только не вечная
2) + Изменить вид сервера нельзя
+ Операционную систему нельзя
+) Количество пользователей нельзя
5) Выбрать дополнительные модули нельзя





 
